"use strict";var WPFormsInternalInformationField=window.WPFormsInternalInformationField||function(d){let e,l={init:function(){d(l.ready)},ready:function(){e=d("#wpforms-builder"),l.bindUIActionsFields()},bindUIActionsFields:function(){l.dragDisable(),e.on("wpformsFieldAdd",l.dragDisable).on("input",'.wpforms-field-option-row-heading input[type="text"]',l.headingUpdates).on("input",".wpforms-field-option-row-expanded-description textarea",l.expandedDescriptionUpdates).on("input",'.wpforms-field-option-row-cta-label input[type="text"]',l.ctaButtonLabelUpdates).on("input",'.wpforms-field-option-row-cta-link input[type="text"]',l.ctaButtonLinkUpdates).on("click",".cta-button.cta-expand-description a",l.showExpandedDescription).on("focusout",'.wpforms-field-option-row-cta-link input[type="text"]',l.validateCTAlinkField).on("mousedown",".wpforms-field-internal-information-checkbox",l.handleCheckboxClick).on("wpformsDescriptionFieldUpdated",l.descriptionFieldUpdated).on("wpformsBeforeFieldDeleteAlert",l.preventDeleteFieldAlert).on("mouseenter",".internal-information-not-editable .wpforms-field-delete",l.showDismissTitle)},saveInternalInformationCheckbox:function(e,n){d.post(wpforms_builder.ajax_url,{action:"wpforms_builder_save_internal_information_checkbox",formId:d("#wpforms-builder-form").data("id"),name:e,checked:n,nonce:wpforms_builder.nonce})},replaceCheckboxes:function(e,n){var t,i,o=[];let a=-1;for(t of e.split(/\r?\n/))a++,(t=t.trim()).startsWith("[] ")?(i=`iif-${n}-${md5(t)}-`+a,t=t.replace("[] ",`<div class="wpforms-field-internal-information-checkbox-wrap"><div class="wpforms-field-internal-information-checkbox-input"><input type="checkbox" name="${i}" value="1" class="wpforms-field-internal-information-checkbox" /></div><div class="wpforms-field-internal-information-checkbox-label">`),t+="</div></div>",o.push(t)):o.push(t);return wpf.wpautop(o.join("\n")).replace(/<br \/>\n$/,"")},dragDisable:function(){WPForms.Admin.Builder.DragFields.fieldDragDisable(d(".internal-information-not-draggable"),!1)},headingUpdates:function(){var e=d(this),n=wpf.sanitizeHTML(e.val()),e=d("#wpforms-field-"+e.parent().data("field-id")).find(".wpforms-field-internal-information-row-heading .heading");e.toggle(0!==n.length),WPFormsBuilder.updateDescription(e.find(".text"),n)},expandedDescriptionUpdates:function(){var e=d(this),n=wpf.sanitizeHTML(e.val()),e=e.parent().data("field-id"),t=d("#wpforms-field-"+e),i=t.find(".internal-information-wrap"),t=t.find(".wpforms-field-internal-information-row-cta-button"),o=d("#wpforms-field-option-"+e),a=o.find('.wpforms-field-option-row-cta-link input[type="text"]').val(),o=0!==o.find('.wpforms-field-option-row-cta-label input[type="text"]').val().length?o.find('.wpforms-field-option-row-cta-label input[type="text"]').val():wpforms_builder.empty_label,r=i.find(".wpforms-field-internal-information-row-expanded-description"),e=l.replaceCheckboxes(n,e);if(WPFormsBuilder.updateDescription(i.find(".expanded-description"),e),0!==n.length)return r.hasClass("expanded")?void 0:void t.html(l.notExpandedButton());r.hide().removeClass("expanded"),0===a.length?t.html(""):t.html(l.standardCtaButton(a,o))},showExpandedDescription:function(e){e.preventDefault();var e=d(this),n=e.closest(".wpforms-field-internal-information").data("field-id"),e=e.closest(".internal-information-content").find(".wpforms-field-internal-information-row-expanded-description"),n=d("#wpforms-field-"+n).find(".wpforms-field-internal-information-row-cta-button"),t=e.hasClass("expanded");e.toggleClass("expanded"),t?(e.slideUp(400),n.html(l.notExpandedButton())):(e.slideDown(400),n.html(l.expandedButton()))},validateCTAlinkField:function(){const e=d(this),n=e.val().trim();e.val(n),""===n||wpf.isURL(n)||d.confirm({title:wpforms_builder.heads_up,content:wpforms_builder.iif_redirect_url_field_error,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"],action:function(){e.trigger("focus")}}}})},handleCheckboxClick:function(e){e.preventDefault();var e=d(this),n=!e.prop("checked");e.prop("checked",n),l.saveInternalInformationCheckbox(e.prop("name"),Number(n))},descriptionFieldUpdated:function(e,n){"internal-information"===d("#wpforms-field-"+n.id).data("field-type")&&0!==n.value.length&&(n.value=l.replaceCheckboxes(n.value,n.id),WPFormsBuilder.updateDescription(n.descField,n.value))},preventDeleteFieldAlert:function(e,n,t){"internal-information"===t&&(e.preventDefault(),WPFormsBuilder.fieldDeleteById(n.id,t,50))},showDismissTitle:function(){d(this).attr("title",wpforms_builder.iif_dismiss)},ctaButtonLinkUpdates(){var e=d(this),n=e.parent().data("field-id"),t=d("#wpforms-field-"+n),i=t.find(".wpforms-field-internal-information-row-cta-button"),t=t.find(".wpforms-field-internal-information-row-expanded-description"),o=e.closest("#wpforms-field-option-"+n).find(".wpforms-field-option-row-expanded-description textarea").val(),n=e.closest("#wpforms-field-option-"+n).find('.wpforms-field-option-row-cta-label input[type="text"]').val();if(0!==o.length)return t.hasClass("expanded")?void i.html(l.expandedButton()):void i.html(l.notExpandedButton());wpf.isURL(e.val())&&0!==n.length?i.html(l.standardCtaButton(e.val(),n)):i.html("")},ctaButtonLabelUpdates:function(){var e=d(this),n=wpf.sanitizeHTML(e.val()),t=e.parent().data("field-id"),i=d("#wpforms-field-"+t),o=i.find(".wpforms-field-internal-information-row-cta-button"),i=i.find(".wpforms-field-internal-information-row-expanded-description"),a=e.closest("#wpforms-field-option-"+t).find(".wpforms-field-option-row-expanded-description textarea").val(),e=e.closest("#wpforms-field-option-"+t).find('.wpforms-field-option-row-cta-link input[type="text"]').val();if(0!==a.length&&0!==n.length)return i.hasClass("expanded")?void o.html(l.expandedButton()):void o.html(l.notExpandedButton());0!==n.length&&wpf.isURL(e)?o.html(l.standardCtaButton(e,n)):0===a.length&&o.html("")},standardCtaButton:function(e,n){return`<div class="cta-button cta-link-external ">
				<a href="%url%" target="_blank" rel="noopener noreferrer">
					<span class="button-label">%label%</span>
				</a></div>`.replace("%url%",wpf.sanitizeHTML(e)).replace("%label%",wpf.sanitizeHTML(n))},notExpandedButton:function(){return`<div class="cta-button cta-expand-description not-expanded">
				<a href="#" target="_blank" rel="noopener noreferrer">
					<span class="button-label">%label%</span>
					<span class="icon not-expanded">
						<svg viewBox="0 0 10 7">
							<path d="M4.91016 5.90234C5.15625 6.14844 5.56641 6.14844 5.8125 5.90234L9.53125 2.18359C9.80469 1.91016 9.80469 1.5 9.53125 1.25391L8.92969 0.625C8.65625 0.378906 8.24609 0.378906 8 0.625L5.34766 3.27734L2.72266 0.625C2.47656 0.378906 2.06641 0.378906 1.79297 0.625L1.19141 1.25391C0.917969 1.5 0.917969 1.91016 1.19141 2.18359L4.91016 5.90234Z"></path>
							<path d="M4.91016 5.90234C5.15625 6.14844 5.56641 6.14844 5.8125 5.90234L9.53125 2.18359C9.80469 1.91016 9.80469 1.5 9.53125 1.25391L8.92969 0.625C8.65625 0.378906 8.24609 0.378906 8 0.625L5.34766 3.27734L2.72266 0.625C2.47656 0.378906 2.06641 0.378906 1.79297 0.625L1.19141 1.25391C0.917969 1.5 0.917969 1.91016 1.19141 2.18359L4.91016 5.90234Z"></path>
						</svg>
					</span>
				</a></div>`.replace("%label%",wpforms_builder.iif_more)},expandedButton:function(){return`<div class="cta-button cta-expand-description expanded">
				<a href="#" target="_blank" rel="noopener noreferrer">
					<span class="button-label">%label%</span>
					<span class="icon expanded">
						<svg viewBox="0 0 10 7">
							<path d="M5.83984 0.625C5.56641 0.378906 5.15625 0.378906 4.91016 0.625L1.19141 4.34375C0.917969 4.61719 0.917969 5.02734 1.19141 5.27344L1.79297 5.90234C2.06641 6.14844 2.47656 6.14844 2.72266 5.90234L5.375 3.25L8 5.90234C8.24609 6.14844 8.68359 6.14844 8.92969 5.90234L9.55859 5.27344C9.80469 5.02734 9.80469 4.61719 9.55859 4.34375L5.83984 0.625Z" fill="red"></path>
						</svg>
					</span>
				</a></div>`.replace("%label%",wpforms_builder.close)}};return l}((document,window,jQuery));WPFormsInternalInformationField.init();